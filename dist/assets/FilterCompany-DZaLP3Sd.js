import{d as V,b as _,o,c as r,a as e,t as f,e as E,F as M,r as T,f as O,g as l,u as J,w as K,h as W,i as B,l as X,m as Y,z as Z,n as ee,p as te,v as se,j as L,q as ae}from"./index-L9FfN0sg.js";import{M as oe,_ as le}from"./MainLayout-vbuhhaMz.js";import{u as ne}from"./companies-DLa6_4Al.js";import{P as re}from"./PopularCompanySkeleton-9TYsik3G.js";import{P as ie}from"./PreloaderComponent-CBkDSBTt.js";import{E as ue}from"./ErrorReconnectComponent-BcWJmWIW.js";import"./_plugin-vue_export-helper-D3a9Murb.js";import"./useTheme-8FjXQqbL.js";import"./logo-DvPXu7Y6.js";const de={class:"w-full pb-10 border-b-2 sm:border-none sm:pb-0"},ce={class:"flex gap-5"},me=["src"],xe={class:"flex flex-col justify-between w-full"},ve={class:"max-w-full"},pe={class:"flex gap-1 items-center font-light text-sm 3xl:text-base dark:text-gray-300"},fe={class:"flex gap-1"},ye={key:0,class:"bx bxs-star-half text-xl text-[#003F72] 3xl:text-2xl"},ge={class:"font-light text-sm 3xl:text-base dark:text-gray-300"},be=V({__name:"ItemCompanyComponent",props:{company:{type:Object,required:!0}},emits:["goToOverviewCompany"],setup(m,{emit:x}){const b=m,v=x;function $(u){v("goToOverviewCompany",u)}const i=_(()=>{var u;return Math.floor(((u=b.company.rating)==null?void 0:u.average)??0)}),k=_(()=>{var u;return(((u=b.company.rating)==null?void 0:u.average)??0)%1>=.5}),q=_(()=>5-i.value-(k.value?1:0));return(u,y)=>{var w,p;return o(),r("div",de,[e("div",ce,[e("img",{onClick:y[0]||(y[0]=c=>$(m.company.id)),src:m.company.logo,class:"xxs:w-16 xxs:h-16 w-24 h-24 2xl:w-32 2xl:h-32 3xl:w-36 3xl:h-36 hover:cursor-pointer object-cover rounded",alt:""},null,8,me),e("div",xe,[e("div",ve,[e("h3",{class:"xs:max-w-36 text-md 3xl:text-lg max-w-44 md:max-w-32 lg:max-w-44 2xl:max-w-48 3xl:max-w-60 hover:underline truncate cursor-pointer text-white",onClick:y[1]||(y[1]=c=>$(m.company.id))},f(m.company.name),1),e("span",pe,[y[2]||(y[2]=e("i",{class:"bx bx-map text-gray-500"},null,-1)),E(f((w=m.company.address)==null?void 0:w.city)+" , "+f((p=m.company.address)==null?void 0:p.country),1)]),e("div",fe,[(o(!0),r(M,null,T(i.value,c=>(o(),r("i",{key:"filled-"+c,class:"bx bxs-star text-xl 3xl:text-2xl text-[#003F72]"}))),128)),k.value?(o(),r("i",ye)):O("",!0),(o(!0),r(M,null,T(q.value,c=>(o(),r("i",{key:"empty-"+c,class:"bx bx-star text-xl 3xl:text-2xl text-[#003F72]"}))),128))])]),e("span",ge,f(m.company.sector),1)])])])}}}),we={class:"w-full md:h-[500px] bg-[#F8FAFB] shadow flex items-center py-10"},he={class:"w-full px-[12%]"},ke={class:"max-w-[800px] mx-auto"},Ce={class:"relative w-full"},Fe={class:"mb-10 sm:mb-32 mt-16 px-[12%] w-full"},Pe={key:0,class:"flex items-center justify-between flex-wrap mt-4"},_e={class:"md:text-left text-end md:w-auto"},$e={class:"flex gap-2 items-center"},qe={class:"relative flex-1 min-w-44"},Se={class:"flex items-center gap-2"},Me={class:"inline text-sm md:text-base"},Te={key:0,class:"absolute left-0 z-10 mt-2 w-full bg-white border border-gray-300 rounded-lg shadow-lg"},je={class:"grid mt-10 gap-y-16 grid-cols-1 md:grid-cols-2 xl:grid-cols-3 justify-items-stretch gap-x-10"},Be={key:1,class:"col-span-3 flex flex-col items-center justify-center p-8"},Oe={class:"mb-6 text-center"},De={class:"text-gray-600 max-w-md"},Re={key:1,class:"flex gap-3 items-center justify-center my-10 py-5"},Ne=["disabled"],Ae=["onClick"],Le=["disabled"],Ke=V({__name:"FilterCompany",setup(m){const x=Y(),b=Z(),v=l(x.query.q||""),$=l(x.query.groupBy||""),i=l(!1),k=l(0),q=l(6),u=J(),y=ne(),w=l(!1),p=l(!1),c=l([]),n=l(Number(x.query.page)||1),z=l(!1),C=l(!1),j=l(!1),D=l("Não foi possível carregar as informações solicitadas."),N=l(0),F=l("numberOfReviews"),h=_(()=>Math.ceil(k.value/q.value)),I=_(()=>(n.value-1)*q.value+c.value.length),U=_(()=>{const a=[];if(h.value<=4)for(let s=1;s<=h.value;s++)a.push(s);else{let s=n.value<4?1:n.value,g=s+4-1;g>h.value&&(g=h.value,s=Math.max(1,g-4+1));for(let P=s;P<=g;P++)a.push(P)}return a});async function A(a){if(a===F.value)return;F.value=a,w.value=!1;const t={...x.query};b.push({query:{...t,orderBy:F.value}}),await S(1,F.value)}const Q=a=>{u.isLogged()?(p.value=!1,window.location.href="/overview/company/"+a):p.value=!0},G=()=>{u.isLogged()?(p.value=!1,b.push({path:"/add/company",query:{name:v.value}})):p.value=!0};async function S(a,t=""){var s,g,P;try{if(i.value=!0,C.value=!1,j.value=!1,!navigator.onLine){j.value=!0,D.value="Sem conexão com a internet. Verifique sua rede e tente novamente.";return}const d=await y.getAll({filter:v.value?{name:v.value}:{},orderBy:$.value?$.value:t,page:a,limit:q.value});d.data!==null?(c.value=d.data.companies,k.value=d.data.metadata.total,z.value=a===h.value):(C.value=!0,c.value=[])}catch(d){console.error("Erro ao buscar dados:",d),j.value=!0,N.value=((s=d==null?void 0:d.response)==null?void 0:s.status)||0,D.value=((P=(g=d==null?void 0:d.response)==null?void 0:g.data)==null?void 0:P.message)||"Ocorreu um erro ao carregar os dados das empresas."}finally{i.value=!1}}const R=async a=>{a<1||a>h.value||a===n.value||(n.value=a,await b.push({query:{...x.query,page:String(a)}}),await S(a),window.scrollTo(0,0))},H=async()=>{n.value=1;const a={...x.query};await b.push({query:{...a,q:v.value,page:"1"}}),await S(1)};return K(()=>x.query.page,async a=>{const t=Number(a)||1;t!==n.value&&(n.value=t,await S(t))}),W(async()=>{await S(n.value)}),(a,t)=>j.value?(o(),B(ue,{key:0,message:D.value,"error-code":N.value,"reload-button-text":"Recarregar página"},null,8,["message","error-code"])):i.value?(o(),B(ie,{key:1})):(o(),B(oe,{key:2},{default:X(()=>[e("div",we,[e("div",he,[t[8]||(t[8]=e("div",{class:"flex items-center gap-[64px] justify-between"},[e("div",{class:"flex-1 text-center"},[e("button",{class:"xs:text-sm cursor-default border p-2 mb-3 rounded-lg shadow-sm flex items-center justify-center mx-auto gap-2"},[e("i",{class:"bx bx-star text-xl 3xl:text-2xl text-[#003F72]"}),E(" Avaliações reais de funcionários ")]),e("h1",{class:"text-3xl mb-2.5 font-bold sm:text-4xl 2xl:text-5xl max-w-[600px] mx-auto text-[#2D2D2D]"}," Descubra como é trabalhar nas melhores empresas ! "),e("p",{class:"hidden sm:block text-xl md:text-2xl max-w-[800px] mx-auto"}," Avaliações autênticas sobre experiência e salário compartilhadas por funcionários atuais e antigos. ")])],-1)),e("div",ke,[e("form",{onSubmit:ee(H,["prevent"]),class:"mt-5 flex"},[e("div",Ce,[te(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),required:"",placeholder:"Pesquisar...",class:"w-full bg-gray-100 text-gray-800 border-2 rounded-lg px-4 py-4 focus:ring-2 focus:ring-[#003F72] focus:outline-none placeholder:text-gray-500"},null,512),[[se,v.value]]),t[7]||(t[7]=e("button",{type:"submit",class:"absolute flex items-center gap-1 right-2 top-1/2 transform -translate-y-1/2 bg-[#003F72] hover:bg-[#002a4d] text-white rounded-md px-4 py-2 text-sm font-medium transition-colors"},[e("i",{class:"bx bx-search text-xl"}),e("span",{class:"md:inline-block hidden"},"Pesquisar")],-1))])],32)])])]),e("div",Fe,[!i.value&&!C.value?(o(),r("div",Pe,[e("span",_e,f(I.value)+" de "+f(k.value)+" empresas encontrados ",1),e("div",$e,[t[12]||(t[12]=e("span",{class:"block flex-1"},"Ordenar por:",-1)),e("div",qe,[e("button",{type:"button",onClick:t[1]||(t[1]=s=>w.value=!w.value),class:"w-full h-full flex items-center justify-between p-2 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-[#003F72] border border-[#D4D2D0]"},[e("div",Se,[e("span",Me,f(F.value==="numberOfReviews"?"Mais Relevantes":F.value==="average"?"Mais Classificadas":""),1)]),t[9]||(t[9]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),w.value?(o(),r("ul",Te,[e("li",{onClick:t[2]||(t[2]=s=>A("numberOfReviews")),class:"flex items-center gap-2 px-4 py-2 hover:bg-gray-100 hover:rounded-lg cursor-pointer"},t[10]||(t[10]=[e("span",{class:"text-sm md:text-base"},"Mais Relevantes",-1)])),e("li",{onClick:t[3]||(t[3]=s=>A("average")),class:"flex items-center gap-2 px-4 py-2 hover:bg-gray-100 hover:rounded-lg cursor-pointer"},t[11]||(t[11]=[e("span",{class:"text-sm md:text-base"},"Mais Classificadas",-1)]))])):O("",!0)])])])):O("",!0),e("div",je,[i.value&&!C.value?(o(),r(M,{key:0},T(3,s=>L(re,{key:s})),64)):!i.value&&C.value?(o(),r("div",Be,[e("div",Oe,[t[13]||(t[13]=e("div",{class:"bg-gray-100 inline-flex rounded-full p-4 mb-4"},[e("i",{class:"bx bx-building text-5xl text-[#003F72]"})],-1)),t[14]||(t[14]=e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"Não encontrou a empresa?",-1)),e("p",De," Você pode adicionar a empresa "+f(v.value)+" à nossa base de dados. ",1)]),e("button",{onClick:G,class:"flex items-center gap-2 bg-[#003F72] hover:bg-[#002a4d] text-white font-medium py-3 px-6 rounded-lg transition-colors"},t[15]||(t[15]=[e("i",{class:"bx bx-plus-circle text-xl"},null,-1),e("span",null,"Adicionar empresa",-1)]))])):(o(!0),r(M,{key:2},T(c.value,s=>(o(),B(be,{key:s.id,company:s,onGoToOverviewCompany:Q},null,8,["company"]))),128))]),!i.value&&!C.value?(o(),r("div",Re,[e("button",{onClick:t[4]||(t[4]=s=>R(n.value-1)),disabled:n.value===1||i.value,class:"border-none bg-[#F3F2F1] px-3 py-2 sm:px-4 sm:py-2 rounded text-[#003F72]"},t[16]||(t[16]=[e("span",{class:"hidden sm:inline-block"},"Anterior",-1),e("i",{class:"inline-block sm:hidden bx bx-chevrons-left"},null,-1)]),8,Ne),(o(!0),r(M,null,T(U.value,s=>(o(),r("button",{key:s,onClick:g=>R(s),class:ae([n.value===s?"bg-[#003F72] text-white":"bg-[#F3F2F1] text-black","border-none px-3 py-2 sm:px-4 sm:py-2 rounded"])},f(s),11,Ae))),128)),e("button",{onClick:t[5]||(t[5]=s=>R(n.value+1)),disabled:n.value===h.value||i.value,class:"border-none bg-[#F3F2F1] px-3 py-2 sm:px-4 sm:py-2 rounded text-[#003F72]"},t[17]||(t[17]=[e("span",{class:"hidden sm:inline-block"},"Próximo",-1),e("i",{class:"inline-block sm:hidden bx bx-chevrons-right"},null,-1)]),8,Le)])):O("",!0),L(le,{"modal-value":p.value,onClose:t[6]||(t[6]=s=>p.value=!1)},null,8,["modal-value"])])]),_:1}))}});export{Ke as default};
