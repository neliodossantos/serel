import{d as M,u as P,g as w,y as g,w as b,c as l,j as y,l as S,F as E,z as F,m as V,o as n,a as s,n as B,p as h,v as L,q as d,t as p,f as c,C as T,e as q}from"./index-L9FfN0sg.js";import{_ as z}from"./logo-DvPXu7Y6.js";import{_ as D}from"./AuthLayout.vue_vue_type_script_setup_true_lang-DWqLQrr6.js";import{_ as N,v as m,u as A,a as U}from"./_plugin-vue_export-helper-D3a9Murb.js";import"./useTheme-8FjXQqbL.js";const I={class:"md:bg-white md:py-[40px] md:px-[50px] md:w-[460px] box-border mx-auto md:rounded-[16px] md:shadow-lg"},O={class:"flex flex-col mt-2 mb-2 gap-1"},R={key:0,class:"text-red-400 text-sm"},Z={class:"w-full mb-2"},$={class:"relative flex flex-col gap-1"},G=["type"],H={key:0,class:"text-red-400 text-sm"},J={class:""},K=["disabled"],Q={key:0,class:"animate-spin rounded-full h-4 w-4 border-t-4 border-blue-500 border-solid"},W=M({__name:"Login",setup(X){const i=A(),f=F(),v=V(),k=P(),r=w(!1),u=w(!1),o=g({email:"",password:""}),t=g({email:{message:"",valid:!0},password:{message:"",valid:!0}}),_=()=>{u.value=!u.value},C=()=>{t.email=m.validateEmail(o.email),t.password=m.validatePassword(o.password)};b(()=>o.email,()=>{t.email=m.validateEmail(o.email)},{deep:!0}),b(()=>o.password,()=>{t.password=m.validatePassword(o.password)},{deep:!0});const j=async()=>{try{if(r.value=!0,C(),!Object.values(t).every(a=>a.valid)){i.error(" Preencha todos os campos!");return}const e=await k.login(o);if(e.success)if(i.success(e.message),v.query.redirect){const a=v.query.redirect;localStorage.removeItem("redirect"),setTimeout(()=>{f.push(a)},3e3)}else setTimeout(()=>{f.push("/")},3e3);else i.error(e.message)}catch{i.error("Ocorreu um erro!")}finally{r.value=!1}};return(x,e)=>(n(),l(E,null,[y(D,null,{default:S(()=>[s("div",I,[e[8]||(e[8]=s("div",{class:"mb-5"},[s("a",{href:"/"},[s("img",{class:"md:max-w-[160px] max-w-[150px]",src:z,alt:""})])],-1)),e[9]||(e[9]=s("h1",{class:"my-1 font-[700] text-2xl"},"Seja bem-vindo de volta",-1)),e[10]||(e[10]=s("p",{class:"text-[14px] text-[#344054] font-[500]"},"Para usar o sistema, por favor informe os seus dados",-1)),s("form",{onSubmit:B(j,["prevent"]),class:""},[s("div",O,[e[2]||(e[2]=s("span",{class:"text-[#344054] text-sm block font-[500]"},"E-mail",-1)),h(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.email=a),class:d([t.email.valid?"":"border-red-400 focus:ring-red-400","w-full px-4 py-2 border border-[#003F72] rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"]),type:"email",placeholder:"Seu e-mail"},null,2),[[L,o.email]]),t.email.valid?c("",!0):(n(),l("span",R,p(t.email.message),1))]),s("div",Z,[s("div",$,[e[5]||(e[5]=s("span",{class:"text-[#344054] text-sm [font-[500]"},"Palavra-passe",-1)),h(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>o.password=a),type:u.value?"text":"password",class:d([t.password.valid?"":"border-red-400 focus:ring-red-400","w-full px-4 py-2 border border-[#003F72] rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"]),placeholder:"Digite sua senha"},null,10,G),[[T,o.password]]),s("button",{type:"button",onClick:_,class:"absolute inset-y-0 top-7 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700 focus:outline-none"},[u.value?(n(),l("svg",{key:0,class:d([t.password.valid?"":"text-red-400","size-6"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},e[3]||(e[3]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"},null,-1),s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1)]),2)):(n(),l("svg",{key:1,class:d([t.password.valid?"":"text-red-400","size-6"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},e[4]||(e[4]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"},null,-1)]),2))])]),t.password.valid?c("",!0):(n(),l("span",H,p(t.password.message),1))]),e[7]||(e[7]=s("div",{class:"flex justify-end underline"},[s("a",{class:"text-sm",href:"/forgot-password"},"Esqueci a minha palavra-passe")],-1)),s("div",J,[s("button",{type:"submit",disabled:r.value,class:d([{disable:r.value},"flex items-center gap-3 justify-center mt-3 bg-[#003F72] text-white w-full py-[10px] px-[20px] rounded-[12px] font-bold"])},[q(p(r.value?"Processando...":"Entrar")+" ",1),r.value?(n(),l("div",Q)):c("",!0)],10,K),e[6]||(e[6]=s("div",{class:"mt-3 flex justify-center items-center"},[s("span",{class:"block"},"Ainda n√£o tens uma conta?"),s("a",{class:"text-center ml-1 hover:underline",href:"/signup"},"Crie conta")],-1))])],32)])]),_:1}),y(N)],64))}}),ae=U(W,[["__scopeId","data-v-1eddd87c"]]);export{ae as default};
