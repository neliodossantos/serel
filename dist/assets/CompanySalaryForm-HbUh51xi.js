import{M as ne}from"./MainLayout-vbuhhaMz.js";import{d as X,g as c,u as de,y as L,w as y,h as Y,o as i,c as d,a as e,e as F,t as m,n as U,F as z,r as ce,f as u,p as J,v as W,j as D,B as me,q as k,i as T,s as ue,l as G,m as pe}from"./index-L9FfN0sg.js";import{_ as xe,v as r,u as ve,a as fe}from"./_plugin-vue_export-helper-D3a9Murb.js";import{_ as H}from"./DatePickerComponent.vue_vue_type_script_setup_true_lang-CYlXeDCp.js";import{u as ye,a as ge,b as be,S as he,c as we}from"./SelectRoleComponent-syAolKL7.js";import{f as $}from"./formatDate-IHIQYvFe.js";import{a as K}from"./formatCurrency-BY4vl4in.js";import{u as De}from"./companies-DLa6_4Al.js";import{P as Q}from"./PreloaderComponent-CBkDSBTt.js";import{M as Se}from"./ModalComponent-CF4lxKtQ.js";import{E as ke}from"./ErrorReconnectComponent-BcWJmWIW.js";import"./useTheme-8FjXQqbL.js";import"./logo-DvPXu7Y6.js";const _e={class:"py-5"},Ee={class:"md:text-2xl max-w-[800px] text-lg mb-6 dark:text-gray-300"},Fe={class:"font-bold"},Ae={class:""},Ie={class:"flex justify-between w-full"},Ce=["onClick"],Te={key:0,class:"text-red-400 mt-1"},Re={class:""},je={class:"flex justify-between w-full"},Ve={key:0,class:"text-red-400 mt-1"},$e={key:0,class:"text-red-400 mt-1"},Le={key:0,class:"text-red-400 mt-1"},Me={class:""},Ne={key:0,class:"text-red-400 mt-1"},qe={class:""},Pe={class:"relative w-full"},Be=["value"],Oe={key:0,class:"text-red-400 mt-1"},Ue={class:""},ze={class:"flex justify-between w-full"},Je={key:0,class:"text-red-400 mt-1"},We={class:""},Ge={class:"flex justify-between w-full"},He={key:0,class:"text-red-400 mt-1"},Ke={class:""},Qe={class:"flex md:flex-nowrap flex-wrap justify-between gap-8 w-full"},Xe={class:"w-full"},Ye={class:"w-full relative"},Ze={key:0,class:"text-red-400 mt-1"},et={key:1,class:"text-red-400 mt-1"},tt={key:0,class:"w-full"},st={class:"w-full relative"},at={key:0,class:"text-red-400 mt-1"},ot={class:"mt-6 w-full"},lt=["disabled"],rt={key:0,class:"animate-spin rounded-full h-4 w-4 border-t-4 border-blue-500 border-solid"},it=X({__name:"FormCompanySalaryComponent",props:{currentCompany:{}},emits:["toggleSuccessRequest"],setup(M,{emit:R}){const j=R,g=M,x=ve(),A=c(!1),I=c([]),p=c(!1),b=ye(),S=ge(),C=be(),h=de().getUser(),n=c(null),w=c(null),v=["Junior","Medium","Senior"],V=c(""),f=c(""),_=c([]),t=L({companyId:g.currentCompany.id,userId:h.id,positionRoleId:"",positionLevel:"",employeeType:"",totalExperience:null,companyExperience:null,salaryAmount:0,satisfied:null,period:{from:"",to:""}}),a=L({companyId:{message:"",valid:!0},userId:{message:"",valid:!0},areaId:{message:"",valid:!0},positionRoleId:{message:"",valid:!0},positionLevel:{message:"",valid:!0},employeeType:{message:"",valid:!0},totalExperience:{message:"",valid:!0},companyExperience:{message:"",valid:!0},salaryAmount:{message:"",valid:!0},satisfied:{message:"",valid:!0},startDate:{message:"",valid:!0},endDate:{message:"",valid:!0},rangeDate:{message:"",valid:!0}}),Z=o=>{t.period.from=$.getDate(o),t.employeeType==="Employee"&&(t.period.to=$.getDate(o),console.log(t.period.to))},ee=o=>{t.period.to=$.getDate(o)};y(()=>t.companyId,()=>{a.companyId=r.validateField(t.companyId,"Empresa")},{deep:!0}),y(()=>f,()=>{a.areaId=r.validateField(f,"Sector")},{deep:!0}),y(()=>t.positionRoleId,()=>{a.positionRoleId=r.validateField(t.positionRoleId,"Posição na Empresa")},{deep:!0}),y(()=>t.positionLevel,()=>{a.positionLevel=r.validateField(t.positionLevel,"Nivel de Experiência")},{deep:!0}),y(()=>t.companyExperience,()=>{a.companyExperience=r.validateField(t.companyExperience,"Experiência na empresa")},{deep:!0}),y(()=>t.totalExperience,()=>{a.totalExperience=r.validateNumber(t.totalExperience,"Total de Experiência")}),y(()=>t.salaryAmount,()=>{a.salaryAmount=r.validateNumber(t.salaryAmount,"Valor Salárial")},{deep:!0}),y(()=>t.satisfied,()=>{a.satisfied=r.validateField(t.satisfied,"Satisfação Salarial")},{deep:!0}),y(()=>t.employeeType,()=>{a.employeeType=r.validateField(t.employeeType,"Ainda trabalha na empresa")},{deep:!0}),y(()=>t.period.from,()=>{a.startDate=r.validateDate(t.period.from,"Data de Inicio")},{deep:!0});const te=()=>{a.companyId=r.validateField(t.companyId,"Empresa"),a.areaId=r.validateField(f.value,"Sector"),a.positionRoleId=r.validateField(t.positionRoleId,"Posição na Empresa"),a.positionLevel=a.positionLevel=r.validateField(t.positionLevel,"Nivel de Experiência"),a.companyExperience=r.validateField(t.companyExperience,"Experiência na empresa"),a.totalExperience=r.validateNumber(t.totalExperience,"Total de Experiência"),a.salaryAmount=r.validateNumber(t.salaryAmount,"Valor Salarial"),a.satisfied=r.validateField(t.satisfied,"Satisfação Salarial"),a.employeeType=r.validateField(t.employeeType,"Ainda trabalha na empresa"),a.startDate=r.validateDate(t.period.from,"Data de Inicio"),t.employeeType==="Ex-employee"&&(a.endDate=r.validateDate(t.period.to,"Data de Termino"),t.period.from!==""&&t.period.to!==""&&(a.rangeDate=r.validateDateRange(t.period.from,t.period.to)))};function se(o){t.positionLevel=o}function q(o){t.employeeType=o}function P(o){t.satisfied=o}Y(async()=>{try{const o=await b.getAll({filter:{},page:1,limit:100});I.value=o.data??[]}catch(o){console.log(o)}});const ae=o=>{const s=o.target;try{const l=s.value.replace(/\D/g,""),E=K(parseInt(l));t.salaryAmount=l?parseInt(l):null,s.value=E}catch{t.salaryAmount=null,s.value=""}},oe=async o=>{try{const s=await S.getAll({filter:{areaId:o},page:1,limit:100});_.value=s.data??[],console.log(_.value)}catch(s){console.log(s)}},le=async o=>{f.value=o==null?void 0:o.id,f.value!==""?await oe(o==null?void 0:o.id):(_.value=[],t.positionRoleId="")},re=async o=>{t.positionRoleId=o==null?void 0:o.id},B=o=>{A.value=o},ie=()=>{f.value="",_.value=[]},O=async()=>{try{if(p.value=!0,te(),!Object.values(a).every(l=>l.valid)){x.error("Preencha todos os campos");return}const s=await C.createSalary(t);s.success?j("toggleSuccessRequest",!0):x.error(s.message),console.log(t)}catch{x.error("Ocorreu um erro!")}finally{p.value=!1}};return(o,s)=>(i(),d(z,null,[e("form",{onSubmit:U(O,["prevent"])},[e("div",_e,[e("h2",Ee,[s[9]||(s[9]=F("Compartilhe sua avaliação salarial anônima sobre a empresa ")),e("span",Fe,m(o.currentCompany.name),1)]),e("div",{onSubmit:U(O,["prevent"]),class:"md:rounded-lg md:border-2 md:border-[#C3C6E5] flex flex-col gap-12 md:px-8 md:py-10"},[e("div",Ae,[s[10]||(s[10]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Nivel de Experiência",-1)),e("div",Ie,[(i(),d(z,null,ce(v,(l,E)=>e("button",{type:"button",class:k(["border border-[#D4D2D0] p-3 w-full",[t.positionLevel===l?"bg-[#003F72] text-white":"bg-white text-[#003F72]",E===0?"rounded-l-md":"",E===2?"rounded-r-md":""]]),key:E,onClick:gt=>se(l)},m(l==="Junior"?"Júnior":l==="Medium"?"Médio":"Sénior"),11,Ce)),64))]),a.positionLevel.valid?u("",!0):(i(),d("span",Te,m(a.positionLevel.message),1))]),e("div",Re,[s[11]||(s[11]=e("h3",{class:"text-md sm:text-lg font-bold mb-3 dark:text-gray-300"},"Experiência na empresa.",-1)),e("div",je,[J(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>t.companyExperience=l),type:"number",placeholder:"Digite os anos de experiencia na empresa",min:"0",class:"w-full rounded-md border border-[#D4D2D0] p-3 focus:outline-none focus:ring-2 focus:ring-[#003F72] focus:border-transparent"},null,512),[[W,t.companyExperience]])]),a.companyExperience.valid?u("",!0):(i(),d("span",Ve,m(a.companyExperience.message),1))]),e("div",null,[s[12]||(s[12]=e("h3",{class:"text-md sm:text-lg font-bold mb-3 dark:text-gray-300"},"Sector",-1)),D(he,{items:I.value,placeholder:"Selecione a area...",onSelect:le,onReportMissing:B,onClear:ie},null,8,["items"]),a.areaId.valid?u("",!0):(i(),d("span",$e,m(a.areaId.message),1))]),e("div",null,[s[13]||(s[13]=e("h3",{class:"text-md sm:text-lg font-bold mb-3 dark:text-gray-300"},"Função",-1)),D(we,{items:_.value,placeholder:"Selecione a função...",onSelect:re,onReportMissing:B,onClear:s[1]||(s[1]=l=>V.value="")},null,8,["items"]),a.positionRoleId.valid?u("",!0):(i(),d("span",Le,m(a.positionRoleId.message),1))]),e("div",Me,[s[14]||(s[14]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Total de Experiência",-1)),J(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>t.totalExperience=l),type:"number",min:"0",placeholder:"Digite os anos de experiencia de carreira",class:"w-full rounded-md border border-[#D4D2D0] p-3 focus:outline-none focus:ring-2 focus:ring-[#003F72] focus:border-transparent"},null,512),[[W,t.totalExperience]]),a.totalExperience.valid?u("",!0):(i(),d("span",Ne,m(a.totalExperience.message),1))]),e("div",qe,[s[16]||(s[16]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Valor Salarial",-1)),e("div",Pe,[e("input",{value:t.salaryAmount?me(K)(t.salaryAmount):"",onInput:ae,type:"text",class:"w-full rounded-md border border-[#D4D2D0] px-3 py-3 pr-20 focus:outline-none focus:ring-2 focus:ring-[#003F72] focus:border-transparent"},null,40,Be),s[15]||(s[15]=e("div",{class:"absolute h-full right-0 top-0"},[e("div",{class:"w-full h-full flex gap-1 items-center justify-between p-2 rounded-r-lg text-black focus:outline-none outline-none border border-[#D4D2D0] text-gray-900"},[e("i",{class:"bx bx-coin text-2xl text-gray-900"}),F("AOA ")])],-1))]),a.salaryAmount.valid?u("",!0):(i(),d("span",Oe,m(a.salaryAmount.message),1))]),e("div",Ue,[s[17]||(s[17]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Satisfeito com o salário? ",-1)),e("div",ze,[e("button",{type:"button",class:k(["border border-[#D4D2D0] p-3 w-full font-bold text-[#003F72] rounded-l-md",[t.satisfied===!1?"bg-[#003F72] text-white":"bg-white"]]),onClick:s[3]||(s[3]=l=>P(!1))},"Sim",2),e("button",{type:"button",class:k(["border border-[#D4D2D0] p-3 w-full font-bold text-[#003F72] rounded-r-md",[t.satisfied===!0?"bg-[#003F72] text-white":"bg-white"]]),onClick:s[4]||(s[4]=l=>P(!0))},"Não",2)]),a.satisfied.valid?u("",!0):(i(),d("span",Je,m(a.satisfied.message),1))]),e("div",We,[s[18]||(s[18]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Ainda trabalha na empresa?",-1)),e("div",Ge,[e("button",{type:"button",class:k(["border border-[#D4D2D0] p-3 w-full font-bold text-[#003F72] rounded-l-md",[t.employeeType==="Employee"?"bg-[#003F72] text-white":"bg-white"]]),onClick:s[5]||(s[5]=l=>q("Employee"))},"Sim",2),e("button",{type:"button",class:k(["border border-[#D4D2D0] p-3 w-full font-bold text-[#003F72] rounded-r-md",[t.employeeType==="Ex-employee"?"bg-[#003F72] text-white":"bg-white"]]),onClick:s[6]||(s[6]=l=>q("Ex-employee"))},"Não",2)]),a.employeeType.valid?u("",!0):(i(),d("span",He,m(a.employeeType.message),1))]),e("div",Ke,[s[21]||(s[21]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Periodo na empresa",-1)),e("div",Qe,[e("div",Xe,[e("div",Ye,[D(H,{modelValue:n.value,"onUpdate:modelValue":s[7]||(s[7]=l=>n.value=l),placeholder:"Data de Inicio",onDateSelect:Z},null,8,["modelValue"]),s[19]||(s[19]=e("div",{class:"absolute right-3 bottom-3 flex items-center pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 text-[#D4D2D0] font-bold"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])],-1))]),a.startDate.valid?u("",!0):(i(),d("span",Ze,m(a.startDate.message),1)),a.rangeDate.valid?u("",!0):(i(),d("span",et,m(a.rangeDate.message),1))]),t.employeeType==="Ex-employee"?(i(),d("div",tt,[e("div",st,[D(H,{modelValue:w.value,"onUpdate:modelValue":s[8]||(s[8]=l=>w.value=l),placeholder:"Data de Termino",onDateSelect:ee},null,8,["modelValue"]),s[20]||(s[20]=e("div",{class:"absolute right-3 bottom-3 flex items-center pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 text-[#D4D2D0] font-bold"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])],-1))]),a.endDate.valid?u("",!0):(i(),d("span",at,m(a.endDate.message),1))])):u("",!0)])])],32),e("div",ot,[e("button",{type:"submit",class:k(["flex items-center gap-3 justify-center mt-3 bg-[#003F72] text-white w-full py-[10px] px-[20px] rounded-md font-bold",{disable:p.value}]),disabled:p.value},[F(m(p.value?"Processando...":"Confirmar")+" ",1),p.value?(i(),d("div",rt)):u("",!0)],10,lt)])])],32),D(xe)],64))}}),nt=fe(it,[["__scopeId","data-v-01d3636f"]]),dt={key:1},ct={key:1,class:"w-full h-screen flex items-center justify-center"},mt={key:2,class:""},ut={class:"p-6"},pt={class:"flex justify-end"},xt={class:"w-full mb-24 px-[12%]"},vt={class:"mx-auto relative max-w-[400px] sm:max-w-[600px] md:max-w-[900px]"},ft=["href"],yt=["src","alt"],Rt=X({__name:"CompanySalaryForm",setup(M){const R=pe(),j=De(),g=L({}),x=c(!1),A=c(!1),I=c(!1),p=c(!1),b=c(!1),S=c("Não foi possível carregar as informações da empresa."),C=c(0);Y(async()=>{var h,n,w;try{if(x.value=!0,b.value=!1,!navigator.onLine){b.value=!0,S.value="Sem conexão com a internet. Verifique sua rede e tente novamente.";return}const V={filter:{id:R.params.companyId},page:1,limit:5},f=await j.getOne(V);if(!f||!f.data){b.value=!0,S.value="Não foi possível carregar as informações da empresa.";return}Object.assign(g,f.data)}catch(v){console.error(v),b.value=!0,C.value=((h=v==null?void 0:v.response)==null?void 0:h.status)||0,S.value=((w=(n=v==null?void 0:v.response)==null?void 0:n.data)==null?void 0:w.message)||"Ocorreu um erro ao carregar os dados da empresa."}finally{x.value=!1,b.value||(p.value=!0,setTimeout(()=>{p.value=!1},3e4))}});function N(h){A.value=h,x.value=!0,setTimeout(()=>{x.value=!1},1e3),setTimeout(()=>{I.value=!0},8e3),setTimeout(()=>{window.location.href=`/overview/company/${g.id}`},12e3)}return(h,n)=>b.value?(i(),T(ke,{key:0,message:S.value,"error-code":C.value,"reload-button-text":"Recarregar página"},null,8,["message","error-code"])):A.value?(i(),d("div",dt,[x.value?(i(),T(Q,{key:0})):(i(),d("div",ct,n[2]||(n[2]=[ue('<div class="p-5 md:p-0 max-w-2xl flex flex-col gap-5"><i class="block mx-auto bx bxs-check-circle text-[#003F72] animate-bounce text-7xl"></i><h2 class="text-center text-3xl md:text-4xl md:max-w-2xl font-bold"> Avaliação foi enviada com sucesso! 🎉 </h2><div class="bg-gray-100 p-4 rounded-lg text-left"><div class="flex flex-col items-start"><div class="flex items-center justify-center mb-2 gap-2"><i class="bx bx-info-circle text-[#003F72] text-xl"></i><h4 class="text-lg sm:text-xl font-semibold text-[#003F72]">Próximos passos:</h4></div><div><ul class="text-blue-700 space-y-1 text-sm"><li class="flex items-center gap-2 text-[#003F72]"><i class="bx bx-check text-xs"></i> Nossa equipe analisará as informações fornecidas </li><li class="flex items-center gap-2 text-[#003F72]"><i class="bx bx-check text-xs"></i> Você receberá um email com a decisão em até 3 dias úteis </li></ul></div></div></div><p class="text-gray-500 text-center text-base"> Será analisada pela nossa equipe, avaliação ficará visível para os outros usuários. 😊 </p><div class="flex flex-col sm:flex-row gap-4 justify-center"><a href="/" class="flex-1 sm:flex-initial inline-flex items-center justify-center gap-2 px-6 py-3 bg-[#003F72] text-white rounded-lg hover:bg-[#002a4d] transition-all transform hover:scale-105"><i class="bx bx-home"></i> Página Inicial </a><a href="/filter?q=" class="flex-1 sm:flex-initial inline-flex items-center justify-center gap-2 px-6 py-3 border-2 border-[#003F72] text-[#003F72] rounded-lg hover:bg-gray-50 transition-all transform hover:scale-105"><i class="bx bx-search"></i> Explorar Empresas </a></div></div>',1)])))])):(i(),d("div",mt,[x.value?(i(),T(Q,{key:0})):(i(),T(ne,{key:1},{default:G(()=>[D(Se,{isOpen:p.value,onClose:n[1]||(n[1]=w=>p.value=!1),title:"Diretrizes para avaliação",maxWidth:"xl"},{default:G(()=>[e("div",ut,[n[3]||(n[3]=e("div",{class:"flex items-start mb-4"},[e("div",{class:"flex justify-center items-center bg-blue-50 p-3 w-12 h-12 rounded-full mr-4"},[e("i",{class:"bx bxs-info-circle text-3xl text-[#003F72]"})]),e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Lembre-se dessas diretrizes importantes:"),e("p",{class:"text-gray-600 mt-1"},"Sua avaliação ajuda outros profissionais a tomarem decisões importantes")])],-1)),n[4]||(n[4]=e("div",{class:"bg-gray-50 rounded-lg p-4 mb-4"},[e("ul",{class:"space-y-3"},[e("li",{class:"flex items-start"},[e("i",{class:"bx bx-check-circle text-xl text-green-600 mr-2 mt-0.5"}),e("span",null,"Evite linguagem agressiva ou discriminatória")]),e("li",{class:"flex items-start"},[e("i",{class:"bx bx-check-circle text-xl text-green-600 mr-2 mt-0.5"}),e("span",null,"Não utilize palavrões ou conteúdo inapropriado")]),e("li",{class:"flex items-start"},[e("i",{class:"bx bx-check-circle text-xl text-green-600 mr-2 mt-0.5"}),e("span",null,"Todas as avaliações passam por moderação para garantir a qualidade")]),e("li",{class:"flex items-start"},[e("i",{class:"bx bx-lock text-xl text-[#003F72] mr-2 mt-0.5"}),e("span",null,[F("Sua avaliação será publicada de forma "),e("strong",null,"anônima"),F(", garantindo sua privacidade")])])])],-1)),e("div",pt,[e("button",{onClick:n[0]||(n[0]=w=>p.value=!1),class:"bg-[#003F72] hover:bg-[#002a4d] text-white font-medium px-5 py-2 rounded-lg transition-colors"}," Entendi, continuar ")])])]),_:1},8,["isOpen"]),n[5]||(n[5]=e("div",{class:"w-full bg-[#F8FAFB] min-h-[210px] mb-24 flex justify-center border-b border-[#D4D2D0] px-[12%]"},null,-1)),e("div",xt,[e("div",vt,[e("a",{class:"left-0 xxs:-top-40 -top-44 absolute cursor-pointer",href:`/overview/company/${g.id}`},[e("img",{class:"xxs:max-w-32 max-w-44 min-h-full object-cover rounded block",src:g.logo,alt:`Logo da empresa ${g.name}`},null,8,yt)],8,ft),D(nt,{onToggleSuccessRequest:N,currentCompany:g},null,8,["currentCompany"])])])]),_:1}))]))}});export{Rt as default};
