import{M as X}from"./MainLayout-vbuhhaMz.js";import{P as O}from"./PreloaderComponent-CBkDSBTt.js";import{d as H,g as c,u as Y,y as q,w as p,h as J,o as r,c as l,a as e,e as $,t as d,n as L,F as E,r as z,f as m,q as w,p as A,v as C,j as D,i as j,s as Z,l as W,m as ee}from"./index-L9FfN0sg.js";import{u as te}from"./companies-DLa6_4Al.js";import{_ as K,v as i,u as se,a as oe}from"./_plugin-vue_export-helper-D3a9Murb.js";import{_ as G}from"./DatePickerComponent.vue_vue_type_script_setup_true_lang-CYlXeDCp.js";import{u as ae}from"./reviews-BpF1Jmuz.js";import{f as M}from"./formatDate-IHIQYvFe.js";/* empty css                                                                                   */import{M as re}from"./ModalComponent-CF4lxKtQ.js";import{E as le}from"./ErrorReconnectComponent-BcWJmWIW.js";import"./useTheme-8FjXQqbL.js";import"./logo-DvPXu7Y6.js";const ie={class:"sm:py-5"},ne={class:"md:text-2xl max-w-[800px] text-lg mb-6 dark:text-gray-300"},de={class:"font-bold"},me={class:""},ce={class:"flex justify-between w-full"},ue=["onClick"],pe=["onClick"],ve={key:0,class:"text-red-400 mt-1"},xe={class:""},fe={class:"flex justify-between w-full"},ge={key:0,class:"text-red-400 mt-1"},be={class:""},ye={key:0,class:"text-red-400 mt-1"},we={class:""},he={key:0,class:"text-red-400 mt-1"},De={class:""},ke={key:0,class:"text-red-400 mt-1"},_e={class:""},Te={key:0,class:"text-red-400 mt-1"},Fe={class:""},Ae={key:0,class:"text-red-400 mt-1"},Ce={class:""},Se={class:"flex justify-between w-full"},je={key:0,class:"text-red-400 mt-1"},Ee={class:""},$e={class:"flex md:flex-nowrap flex-wrap justify-between gap-8 w-full"},Re={class:"w-full"},Ve={class:"w-full relative"},Ie={key:0,class:"text-red-400 mt-1"},Me={key:1,class:"text-red-400 mt-1"},qe={key:0,class:"w-full"},Ne={class:"w-full relative"},Pe={key:0,class:"text-red-400 mt-1"},Ue={class:"mt-6 w-full"},Be=["disabled"],Oe={key:0,class:"animate-spin rounded-full h-4 w-4 border-t-4 border-blue-500 border-solid"},Le=H({__name:"FormCompanyReviewComponent",props:{currentCompany:{}},emits:["toggleSuccessRequest"],setup(N,{emit:R}){const k=se(),v=R,x=N,_=c([1,2,3,4,5]),f=c(!1),b=ae(),h=Y().getUser(),T=c(null),S=c(null),g=c(localStorage.getItem("star")),t=q({companyId:x.currentCompany.id,userId:h.id,score:0,recommend:null,employeeType:"",jobTitle:"",reviewTitle:"",comment:{comment:"",positiveAspects:"",negativeAspects:""},period:{from:"",to:""}}),o=q({userId:{message:"",valid:!0},score:{message:"",valid:!0},recommend:{message:"",valid:!0},employeeType:{message:"",valid:!0},jobTitle:{message:"",valid:!0},reviewTitle:{message:"",valid:!0},comment:{message:"",valid:!0},positiveAspects:{message:"",valid:!0},negativeAspects:{message:"",valid:!0},startDate:{message:"",valid:!0},endDate:{message:"",valid:!0},rangeDate:{message:"",valid:!0}}),u=n=>{t.period.from=M.getDate(n),t.employeeType==="Employee"&&(t.period.to=M.getDate(n),console.log(t.period.to))},V=n=>{t.period.to=M.getDate(n)};p(()=>t.score,()=>{o.score=i.validateRating(t.score)},{deep:!0}),p(()=>t.recommend,()=>{o.recommend=i.validateTypeBoolean(t.recommend,"Recomendaria a um amigo trabalhar nessa empresa ?")},{deep:!0}),p(()=>t.jobTitle,()=>{o.jobTitle=i.validateField(t.jobTitle,"Posição/Cargo na Empresa")},{deep:!0}),p(()=>t.reviewTitle,()=>{o.reviewTitle=i.validateField(t.reviewTitle,"Título da Avaliação")},{deep:!0}),p(()=>t.comment.comment,()=>{o.comment=i.validateField(t.comment.comment,"Comentário")},{deep:!0}),p(()=>t.comment.positiveAspects,()=>{o.positiveAspects=i.validateField(t.comment.positiveAspects,"Aspectos positivos")},{deep:!0}),p(()=>t.comment.negativeAspects,()=>{o.negativeAspects=i.validateField(t.comment.negativeAspects,"Aspectos negativos")},{deep:!0}),p(()=>t.employeeType,()=>{o.employeeType=i.validateField(t.employeeType,"Ainda trabalha na empresa")},{deep:!0}),p(()=>t.period.from,()=>{o.startDate=i.validateDate(t.period.from,"Data de Inicio")},{deep:!0});const F=()=>{o.score=i.validateRating(t.score),o.recommend=i.validateTypeBoolean(t.recommend,"Recomendaria a um amigo trabalhar nessa empresa ?"),o.jobTitle=i.validateField(t.jobTitle,"Posição/Cargo na Empresa"),o.reviewTitle=i.validateField(t.reviewTitle,"Título da Avaliação"),o.comment=i.validateField(t.comment.comment,"Comentário"),o.positiveAspects=i.validateField(t.comment.positiveAspects,"Aspectos positivos"),o.negativeAspects=i.validateField(t.comment.negativeAspects,"Aspectos negativos"),o.employeeType=i.validateField(t.employeeType,"Ainda trabalha na empresa"),o.startDate=i.validateDate(t.period.from,"Data de Inicio"),t.employeeType==="Ex-employee"&&(o.endDate=i.validateDate(t.period.to,"Data de Termino"),t.period.from!==""&&t.period.to!==""&&(o.rangeDate=i.validateDateRange(t.period.from,t.period.to)))};function I(n){t.score=n}function P(n){t.recommend=n}function U(n){t.employeeType=n}const B=async()=>{try{if(f.value=!0,F(),!Object.values(o).every(a=>a.valid)){k.error("Preencha todos os campos");return}const s=await b.createReview(t);g.value&&localStorage.removeItem("star"),s.success?v("toggleSuccessRequest",!0):k.error(s.message)}catch{k.error("Ocorreu um erro!")}finally{f.value=!1}};return J(()=>{if(localStorage.getItem("star")){const n=parseInt(localStorage.getItem("star")??"0",10);typeof n=="number"&&(I(n),t.score=n)}}),(n,s)=>(r(),l(E,null,[e("form",{onSubmit:L(B,["prevent"])},[e("div",ie,[e("h2",ne,[s[11]||(s[11]=$("Compartilhe sua avaliação anônima sobre a empresa ")),e("span",de,d(n.currentCompany.name),1)]),e("div",{onSubmit:L(B,["prevent"]),class:"md:rounded-lg md:border-2 md:border-[#C3C6E5] flex flex-col gap-12 md:px-8 md:py-10"},[e("div",me,[s[12]||(s[12]=e("h3",{class:"text-md sm:text-lg font-bold mb-3 dark:text-gray-300"},"Avaliação da empresa.",-1)),e("div",ce,[g.value?(r(!0),l(E,{key:0},z(_.value,a=>(r(),l("button",{type:"button",class:w(["border border-[#D4D2D0] p-3 w-full",[t.score===a?"bg-[#003F72] text-white":"bg-white text-[#003F72]",a===1?"rounded-l-md":"",a===5?"rounded-r-md":""]]),key:a,onClick:Q=>I(a)},d(a),11,ue))),128)):(r(!0),l(E,{key:1},z(_.value,a=>(r(),l("button",{type:"button",class:w(["border border-[#D4D2D0] p-3 w-full",[t.score===a?"bg-[#003F72] text-white":"bg-white text-[#003F72]",a===1?"rounded-l-md":"",a===5?"rounded-r-md":""]]),onClick:Q=>I(a)},d(a),11,pe))),256))]),s[13]||(s[13]=e("div",{class:"flex justify-between w-full text-[#767676] mt-2"},[e("span",{class:"font-medium dark:text-gray-300"},"Pessima"),e("span",{class:"font-medium dark:text-gray-300"},"Excelente")],-1)),o.score.valid?m("",!0):(r(),l("span",ve,d(o.score.message),1))]),e("div",xe,[s[14]||(s[14]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Recomendaria a um amigo trabalhar nessa empresa?",-1)),e("div",fe,[e("button",{type:"button",class:w(["border border-[#D4D2D0] p-3 w-full font-bold text-[#003F72] rounded-l-md",[t.recommend===!0?"bg-[#003F72] text-white":"bg-white"]]),onClick:s[0]||(s[0]=a=>P(!0))},"Sim",2),e("button",{type:"button",class:w(["border border-[#D4D2D0] p-3 w-full font-bold text-[#003F72] rounded-r-md",[t.recommend===!1?"bg-[#003F72] text-white":"bg-white"]]),onClick:s[1]||(s[1]=a=>P(!1))},"Não",2)]),o.recommend.valid?m("",!0):(r(),l("span",ge,d(o.recommend.message),1))]),e("div",be,[s[15]||(s[15]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Posição/Cargo na Empresa",-1)),A(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t.jobTitle=a),placeholder:"Escreva...",class:"w-full rounded-md border border-[#D4D2D0] p-3 focus:outline-none focus:ring-2 focus:ring-[#003F72] focus:border-transparent"},null,512),[[C,t.jobTitle]]),o.jobTitle.valid?m("",!0):(r(),l("span",ye,d(o.jobTitle.message),1))]),e("div",we,[s[16]||(s[16]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Título da Avaliação",-1)),A(e("input",{"onUpdate:modelValue":s[3]||(s[3]=a=>t.reviewTitle=a),placeholder:"Digite um titulo para sua avaliação...",class:"w-full rounded-md border border-[#D4D2D0] p-3 focus:outline-none focus:ring-2 focus:ring-[#003F72] focus:border-transparent"},null,512),[[C,t.reviewTitle]]),o.reviewTitle.valid?m("",!0):(r(),l("span",he,d(o.reviewTitle.message),1))]),e("div",De,[s[17]||(s[17]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Comentário",-1)),A(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=a=>t.comment.comment=a),placeholder:"Escreva sua avaliação detalhada aqui...",class:"w-full rounded-md border border-[#D4D2D0] p-3 focus:outline-none focus:ring-2 focus:ring-[#003F72] focus:border-transparent"},null,512),[[C,t.comment.comment]]),o.comment.valid?m("",!0):(r(),l("span",ke,d(o.comment.message),1))]),e("div",_e,[s[18]||(s[18]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Aspectos positivos",-1)),A(e("textarea",{"onUpdate:modelValue":s[5]||(s[5]=a=>t.comment.positiveAspects=a),placeholder:"Escreva...",class:"w-full rounded-md border border-[#D4D2D0] p-3 focus:outline-none focus:ring-2 focus:ring-[#003F72] focus:border-transparent"},null,512),[[C,t.comment.positiveAspects]]),o.positiveAspects.valid?m("",!0):(r(),l("span",Te,d(o.positiveAspects.message),1))]),e("div",Fe,[s[19]||(s[19]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Aspectos negativos",-1)),A(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=a=>t.comment.negativeAspects=a),placeholder:"Escreva...",class:"w-full rounded-md border border-[#D4D2D0] p-3 focus:outline-none focus:ring-2 focus:ring-[#003F72] focus:border-transparent"},null,512),[[C,t.comment.negativeAspects]]),o.negativeAspects.valid?m("",!0):(r(),l("span",Ae,d(o.negativeAspects.message),1))]),e("div",Ce,[s[20]||(s[20]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Ainda trabalha na empresa?",-1)),e("div",Se,[e("button",{type:"button",class:w(["border border-[#D4D2D0] p-3 w-full font-bold text-[#003F72] rounded-l-md",[t.employeeType==="Employee"?"bg-[#003F72] text-white":"bg-white"]]),onClick:s[7]||(s[7]=a=>U("Employee"))},"Sim",2),e("button",{type:"button",class:w(["border border-[#D4D2D0] p-3 w-full font-bold text-[#003F72] rounded-r-md",[t.employeeType==="Ex-employee"?"bg-[#003F72] text-white":"bg-white"]]),onClick:s[8]||(s[8]=a=>U("Ex-employee"))},"Não",2)]),o.employeeType.valid?m("",!0):(r(),l("span",je,d(o.employeeType.message),1))]),e("div",Ee,[s[23]||(s[23]=e("h3",{class:"font-bold text-md sm:text-lg mb-2 dark:text-gray-300"},"Periodo na empresa",-1)),e("div",$e,[e("div",Re,[e("div",Ve,[D(G,{modelValue:T.value,"onUpdate:modelValue":s[9]||(s[9]=a=>T.value=a),placeholder:"Data de Inicio",onDateSelect:u},null,8,["modelValue"]),s[21]||(s[21]=e("div",{class:"absolute right-3 bottom-3 flex items-center pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 text-[#D4D2D0] font-bold"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])],-1))]),o.startDate.valid?m("",!0):(r(),l("span",Ie,d(o.startDate.message),1)),o.rangeDate.valid?m("",!0):(r(),l("span",Me,d(o.rangeDate.message),1))]),t.employeeType==="Ex-employee"?(r(),l("div",qe,[e("div",Ne,[D(G,{modelValue:S.value,"onUpdate:modelValue":s[10]||(s[10]=a=>S.value=a),placeholder:"Data de Termino",onDateSelect:V},null,8,["modelValue"]),s[22]||(s[22]=e("div",{class:"absolute right-3 bottom-3 flex items-center pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 text-[#D4D2D0] font-bold"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])],-1))]),o.endDate.valid?m("",!0):(r(),l("span",Pe,d(o.endDate.message),1))])):m("",!0)])])],32),e("div",Ue,[e("button",{type:"submit",class:w(["flex items-center gap-3 justify-center mt-3 bg-[#003F72] text-white w-full py-[10px] px-[20px] rounded-md font-bold",{disable:f.value}]),disabled:f.value},[$(d(f.value?"Processando...":"Confirmar")+" ",1),f.value?(r(),l("div",Oe)):m("",!0)],10,Be)])])],32),D(K)],64))}}),ze=oe(Le,[["__scopeId","data-v-279014c9"]]),We={key:1},Ge={key:1,class:"w-full h-screen flex items-center justify-center"},He={key:2},Je={class:"p-6"},Ke={class:"flex justify-end"},Qe={class:"w-full mb-24 px-[12%]"},Xe={class:"mx-auto relative max-w-[400px] sm:max-w-[600px] md:max-w-[900px]"},Ye=["href"],Ze=["src","alt"],pt=H({__name:"CompanyReviewForm",setup(N){const R=ee(),k=te(),v=q({}),x=c(!1),_=c(!1),f=c(!1),b=c(!1),y=c(!1),h=c("Não foi possível carregar as informações da empresa."),T=c(0);J(async()=>{var g,t,o;try{if(x.value=!0,y.value=!1,!navigator.onLine){y.value=!0,h.value="Sem conexão com a internet. Verifique sua rede e tente novamente.";return}const V={filter:{id:R.params.companyId},page:1,limit:5},F=await k.getOne(V);if(!F||!F.data){y.value=!0,h.value="Não foi possível carregar as informações da empresa.";return}Object.assign(v,F.data)}catch(u){console.error(u),y.value=!0,T.value=((g=u==null?void 0:u.response)==null?void 0:g.status)||0,h.value=((o=(t=u==null?void 0:u.response)==null?void 0:t.data)==null?void 0:o.message)||"Ocorreu um erro ao carregar os dados da empresa."}finally{x.value=!1,y.value||(b.value=!0,setTimeout(()=>{b.value=!1},3e4))}});function S(g){_.value=g,x.value=!0,setTimeout(()=>{x.value=!1},1e3),setTimeout(()=>{f.value=!0},8e3),setTimeout(()=>{window.location.href=`/overview/company/${v.id}`},12e3)}return(g,t)=>(r(),l(E,null,[y.value?(r(),j(le,{key:0,message:h.value,"error-code":T.value,"reload-button-text":"Recarregar página"},null,8,["message","error-code"])):_.value?(r(),l("div",We,[x.value?(r(),j(O,{key:0})):(r(),l("div",Ge,t[2]||(t[2]=[Z('<div class="p-5 md:p-0 max-w-2xl flex flex-col gap-5"><i class="block mx-auto bx bxs-check-circle text-[#003F72] animate-bounce text-7xl"></i><h2 class="text-center text-3xl md:text-4xl md:max-w-2xl font-bold"> Avaliação foi enviada com sucesso! 🎉 </h2><div class="bg-gray-100 p-4 rounded-lg text-left"><div class="flex flex-col items-start"><div class="flex items-center justify-center mb-2 gap-2"><i class="bx bx-info-circle text-[#003F72] text-xl"></i><h4 class="text-lg sm:text-xl font-semibold text-[#003F72]">Próximos passos:</h4></div><div><ul class="text-blue-700 space-y-1 text-sm"><li class="flex items-center gap-2 text-[#003F72]"><i class="bx bx-check text-xs"></i> Nossa equipe analisará as informações fornecidas </li><li class="flex items-center gap-2 text-[#003F72]"><i class="bx bx-check text-xs"></i> Você receberá um email com a decisão em até 3 dias úteis </li></ul></div></div></div><p class="text-gray-500 text-center text-base"> Será analisada pela nossa equipe, avaliação ficará visível para os outros usuários. 😊 </p><div class="flex flex-col sm:flex-row gap-4 justify-center"><a href="/" class="flex-1 sm:flex-initial inline-flex items-center justify-center gap-2 px-6 py-3 bg-[#003F72] text-white rounded-lg hover:bg-[#002a4d] transition-all transform hover:scale-105"><i class="bx bx-home"></i> Página Inicial </a><a href="/filter?q=" class="flex-1 sm:flex-initial inline-flex items-center justify-center gap-2 px-6 py-3 border-2 border-[#003F72] text-[#003F72] rounded-lg hover:bg-gray-50 transition-all transform hover:scale-105"><i class="bx bx-search"></i> Explorar Empresas </a></div></div>',1)])))])):(r(),l("div",He,[x.value?(r(),j(O,{key:0})):(r(),j(X,{key:1},{default:W(()=>[D(re,{isOpen:b.value,onClose:t[1]||(t[1]=o=>b.value=!1),title:"Diretrizes para avaliação",maxWidth:"xl"},{default:W(()=>[e("div",Je,[t[3]||(t[3]=e("div",{class:"flex items-start mb-4"},[e("div",{class:"flex justify-center items-center bg-blue-50 p-3 w-12 h-12 rounded-full mr-4"},[e("i",{class:"bx bxs-info-circle text-3xl text-[#003F72]"})]),e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Lembre-se dessas diretrizes importantes:"),e("p",{class:"text-gray-600 mt-1"},"Sua avaliação ajuda outros profissionais a tomarem decisões importantes")])],-1)),t[4]||(t[4]=e("div",{class:"bg-gray-50 rounded-lg p-4 mb-4"},[e("ul",{class:"space-y-3"},[e("li",{class:"flex items-start"},[e("i",{class:"bx bx-check-circle text-xl text-green-600 mr-2 mt-0.5"}),e("span",null,"Evite linguagem agressiva ou discriminatória")]),e("li",{class:"flex items-start"},[e("i",{class:"bx bx-check-circle text-xl text-green-600 mr-2 mt-0.5"}),e("span",null,"Não utilize palavrões ou conteúdo inapropriado")]),e("li",{class:"flex items-start"},[e("i",{class:"bx bx-check-circle text-xl text-green-600 mr-2 mt-0.5"}),e("span",null,"Todas as avaliações passam por moderação para garantir a qualidade")]),e("li",{class:"flex items-start"},[e("i",{class:"bx bx-lock text-xl text-[#003F72] mr-2 mt-0.5"}),e("span",null,[$("Sua avaliação será publicada de forma "),e("strong",null,"anônima"),$(", garantindo sua privacidade")])])])],-1)),e("div",Ke,[e("button",{onClick:t[0]||(t[0]=o=>b.value=!1),class:"bg-[#003F72] hover:bg-[#002a4d] text-white font-medium px-5 py-2 rounded-lg transition-colors"}," Entendi, continuar ")])])]),_:1},8,["isOpen"]),t[5]||(t[5]=e("div",{class:"w-full bg-[#F8FAFB] min-h-[210px] mb-24 flex justify-center border-b border-[#D4D2D0] px-[12%]"},null,-1)),e("div",Qe,[e("div",Xe,[e("a",{class:"left-0 xxs:-top-40 -top-44 absolute cursor-pointer",href:`/overview/company/${v.id}`},[e("img",{class:"xxs:max-w-32 max-w-44 min-h-full object-cover rounded block",src:v.logo,alt:`Logo da empresa ${v.name}`},null,8,Ze)],8,Ye),D(ze,{onToggleSuccessRequest:S,currentCompany:v},null,8,["currentCompany"])])])]),_:1}))])),D(K)],64))}});export{pt as default};
