import{d as L,b as M,o,c as n,a as e,q as V,f as Q,t as x,m as H,z,g as i,y as O,w as R,h as T,F,r as S,e as E,j as N,i as B,u as U,l as G,B as Z,k as J,p as K,v as W}from"./index-L9FfN0sg.js";import{M as X}from"./MainLayout-vbuhhaMz.js";import{a as Y,I as ee,_ as se}from"./ItemSalaryOverview.vue_vue_type_script_setup_true_lang-CKsGcg6F.js";import{_ as te}from"./ListRelatedCompaniesComponent.vue_vue_type_script_setup_true_lang-Bofv6PBl.js";import{u as ae}from"./companies-DLa6_4Al.js";import{P as oe}from"./PreloaderComponent-CBkDSBTt.js";import{E as re}from"./ErrorReconnectComponent-BcWJmWIW.js";import"./_plugin-vue_export-helper-D3a9Murb.js";import"./useTheme-8FjXQqbL.js";import"./logo-DvPXu7Y6.js";import"./formatCurrency-BY4vl4in.js";import"./ItemCompanySkeleton-oU3BAync.js";const ne={class:"flex flex-col items-center justify-center"},le={class:"relative"},ie={class:"w-[90px] h-[90px] -rotate-90"},ce=["stroke-dashoffset"],de={class:"absolute inset-0 flex items-center justify-center text-lg font-bold dark:text-white"},ue=L({__name:"ProgressCircle",props:{progress:{type:Number,default:0,required:!1}},setup(b){const a=b,P=M(()=>a.progress>=0&&a.progress<=24?"stroke-[#E53935]":a.progress>=25&&a.progress<=49?"stroke-[#FB8C00]":a.progress>=50&&a.progress<=74?"stroke-[#FDD835]":a.progress>=75&&a.progress<=100?"stroke-[#00B887]":"");return(w,v)=>(o(),n("div",ne,[e("div",le,[(o(),n("svg",ie,[v[0]||(v[0]=e("circle",{cx:"50%",cy:"50%",r:"40%",class:"stroke-gray-200 fill-none","stroke-width":"15"},null,-1)),b.progress>0?(o(),n("circle",{key:0,cx:"50%",cy:"50%",r:"40%",class:V(["fill-none",P.value]),"stroke-width":"15","stroke-dasharray":"220.2","stroke-dashoffset":220.2-220.2*b.progress/100,"stroke-linecap":"round",style:{transition:"stroke-dashoffset 0.3s ease"}},null,10,ce)):Q("",!0)])),e("div",de,x(b.progress)+"% ",1)])]))}}),me={class:"px-[12%] mt-16"},pe={class:"text-xl font-bold dark:text-white"},xe={class:"mb-6 mt-3 flex flex-wrap lg:flex-nowrap gap-8"},fe={class:"flex-[75%] mb-6"},ve={key:0,class:""},ye={class:"grid grid-cols-2 gap-10"},he={key:1,class:"py-10"},ge={class:"py-10"},_e={class:"flex flex-col justify-center items-center gap-1"},be={class:"text-md text-gray-500 text-center dark:text-gray-300"},we=["href"],ke={class:""},Ce={class:"grid md:grid-cols-2 gap-10"},$e={class:""},Fe={class:"text-lg font-bold text-[#003F72]"},Se={key:0,class:"flex gap-3 items-center justify-center my-10 py-5"},De=["disabled"],Pe=["onClick"],Ae=["disabled"],qe={class:"flex-[25%] border border-[#D4D2D0] rounded col-span-1 p-8 md:mt-10 max-h-[350px]"},Me={class:"text-[#595959] dark:text-gray-300 my-3 text-sm"},Be={key:0},Ne={key:1},je=["href"],Ie=L({__name:"CompanySalaryComponent",props:{currentCompany:{},searchQuery:{}},setup(b){const a=b,P=Y(),w=H(),v=z();i(w.query.q||"");const y=i(0),k=i(0),D=i(9),r=O({metadata:{},positions:[]}),m=i(!1),h=i(!1),p=i(Number(w.query.page)||1),C=i([p.value]),A=i(!1),j=M(()=>{var t,s;return!((s=(t=a.currentCompany.rating)==null?void 0:t.salary)!=null&&s.reviewCount)||a.currentCompany.rating.salary.reviewCount===0?0:Math.round(a.currentCompany.rating.salary.satisfiedCount/a.currentCompany.rating.salary.reviewCount*100)}),I=M(()=>{var c;const t=(c=a.currentCompany.rating)==null?void 0:c.salary;if(!(t!=null&&t.reviewCount))return"No momento, ninguém avaliou a satisfação salarial na empresa "+a.currentCompany.name+".";const s=Math.round(t.satisfiedCount/t.reviewCount*100);return s===0?"No momento, ninguém está satisfeito com o salário na empresa "+a.currentCompany.name+".":s<15?"Apenas uma pequena parte está satisfeita com o salário na empresa "+a.currentCompany.name+".":s<50?"Menos da metade está satisfeita com o salário na empresa "+a.currentCompany.name+".":s<75?"A maioria está satisfeita com o salário na empresa "+a.currentCompany.name+",mas ainda há insatisfeitos.":s<100?"Grande parte está satisfeita com o salário na empresa "+a.currentCompany.name+",com poucos insatisfeitos.":"Todos estão satisfeitos com o salário o salário na empresa "+a.currentCompany.name}),q=M(()=>r.positions.reduce((t,s)=>(t[s.area]||(t[s.area]=[]),t[s.area].push(s),t),{}));async function u(t){var s,c;try{m.value=!0,h.value=!1,t===1&&(k.value=0,r.positions=[]);const g={companyId:a.currentCompany.id,...((s=a.searchQuery)==null?void 0:s.role)&&{title:a.searchQuery.role},...((c=a.searchQuery)==null?void 0:c.place)&&{location:a.searchQuery.place}},f=await P.getAll({filter:g,page:t,limit:D.value});f.data!==null?(Object.assign(r,f.data),y.value=f.data.metadata.total,k.value+=f.data.positions.length,A.value=t===Math.ceil(y.value/D.value),C.value.includes(t)||(C.value.push(t),C.value.sort(($,d)=>$-d))):h.value=!0}catch(g){console.error("Erro ao buscar dados:",g)}finally{m.value=!1}}const l=async t=>{scrollTo(0,0);const s=Math.ceil(y.value/D.value);t<1||t>s||t===p.value||(p.value=t,await v.push({query:{...w.query,page:String(t)}}),await u(t))};return R(()=>a.searchQuery,async t=>{t&&(p.value=1,await v.push({query:{...w.query,page:"1",q:t.role}}),await u(1))},{deep:!0}),T(async()=>{await u(p.value)}),(t,s)=>{var c,g;return o(),n("div",me,[e("h2",pe,"Salário na empresa "+x(t.currentCompany.name),1),e("div",xe,[e("div",fe,[m.value&&!h.value?(o(),n("div",ve,[s[2]||(s[2]=e("h1",{class:"max-w-32 my-4 h-4 bg-gray-200 rounded"},null,-1)),e("div",ye,[(o(),n(F,null,S(3,f=>N(ee)),64))])])):!m.value&&h.value?(o(),n("div",he,[e("div",ge,[s[5]||(s[5]=e("div",{class:"flex items-center justify-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-dollar-sign h-12 w-12 text-muted-foreground mx-auto mb-4 dark:text-white","data-lov-id":"src/pages/CompanyDetailPage.tsx:232:20","data-lov-name":"DollarSign","data-component-path":"src/pages/CompanyDetailPage.tsx","data-component-line":"232","data-component-file":"CompanyDetailPage.tsx","data-component-name":"DollarSign","data-component-content":"%7B%22className%22%3A%22h-12%20w-12%20text-muted-foreground%20mx-auto%20mb-4%22%7D"},[e("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),e("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})])],-1)),e("div",_e,[s[4]||(s[4]=e("h1",{class:"font-bold text-xl text-center dark:text-white"},"Esta empresa ainda não foi avaliada",-1)),e("p",be,[s[3]||(s[3]=E("Seja o primeiro avaliar o salario na empresa, clique para ")),e("a",{href:`/company/${t.currentCompany.id}/salary`,class:"text-[#003F72] underline text-md dark:text-blue-500"},"avaliar",8,we)])])])])):(o(!0),n(F,{key:2},S(q.value,(f,$)=>(o(),n("div",{key:$,class:"mb-6"},[e("div",ke,[e("div",Ce,[e("div",$e,[e("h2",Fe,x($),1),(o(!0),n(F,null,S(f,d=>(o(),n("div",{key:d.id,class:""},[(o(),B(se,{position:d,key:d.id},null,8,["position"]))]))),128))])])]),!m.value&&!h.value?(o(),n("div",Se,[e("button",{onClick:s[0]||(s[0]=d=>l(p.value-1)),disabled:p.value===1||m.value,class:"border-none bg-[#F3F2F1] px-3 py-2 sm:px-4 sm:py-2 rounded text-[#003F72]"},s[6]||(s[6]=[e("span",{class:"hidden sm:inline-block"},"Anterior",-1),e("i",{class:"inline-block sm:hidden bx bx-chevrons-left"},null,-1)]),8,De),(o(!0),n(F,null,S(C.value,d=>(o(),n("button",{onClick:_=>l(d),key:d,class:V([p.value===d?"bg-[#003F72] text-white":"bg-[#F3F2F1] text-black","border-none px-3 py-2 sm:px-4 sm:py-2 rounded"])},x(d),11,Pe))),128)),e("button",{onClick:s[1]||(s[1]=d=>l(p.value+1)),disabled:A.value||m.value,class:"border-none bg-[#F3F2F1] px-3 py-2 sm:px-4 sm:py-2 rounded text-[#003F72]"},s[7]||(s[7]=[e("span",{class:"hidden sm:inline-block"},"Próximo",-1),e("i",{class:"inline-block sm:hidden bx bx-chevrons-right"},null,-1)]),8,Ae)])):Q("",!0)]))),128))]),e("div",qe,[s[8]||(s[8]=e("h2",{class:"font-bold text-base sm:text-lg mb-5 dark:text-white"},"Satisfação salarial",-1)),N(ue,{progress:j.value},null,8,["progress"]),e("p",Me,[E(x(I.value)+" ",1),(g=(c=t.currentCompany.rating)==null?void 0:c.salary)!=null&&g.reviewCount?(o(),n("span",Be," com base em "+x(t.currentCompany.rating.salary.reviewCount)+" avaliações.",1)):(o(),n("span",Ne,"Ainda não há avaliações suficientes."))]),e("a",{class:"text-[#003F72] dark:text-blue-500",href:`/company/${t.currentCompany.id}/salary`},"Adicione sua classificação",8,je)])])])}}}),Ee={class:"w-full bg-[#F8FAFB] flex items-center md:border-none border-b border-[#D4D2D0] md:py-0"},Le={class:"w-full mt-10 md:mt-20 min-h-auto px-[12%]"},Qe={class:"flex lg:gap-16 justify-between items-center flex-wrap gap-4 xs:gap-2"},Ve={class:"flex items-start gap-5"},He=["src","alt"],Oe={class:"xs:mb-2"},Te={class:"xs:text-base font-600 text-xl sm:mb-2"},ze={class:"xxs:hidden xs:text-sm text-md"},Re={class:"flex my-1 sm:my-2 items-center xxs:gap-0 gap-1 flex-wrap"},Ue={key:0,class:"bx bxs-star-half text-[#003F72] text-xl sm:text-2xl"},Ge={class:""},Ze={class:"xxs:text-sm text-md ml-1"},Je={class:"block xs:hidden text-sm text-gray-500 underline"},Ke={class:"w-full xs:max-w-72 sm:max-w-md rounded md:w-auto"},We=["href"],Xe={class:"xs:my-5 my-10"},Ye={class:""},es={class:"md:border-b md:border-gray-300 flex gap-3"},ss={class:"list-none pb-1"},ts=["href"],as={class:"list-none pb-1"},os=["href"],rs={class:"list-none pb-1 border-b-[4px] border-[#003F72]"},ns=["href"],ls={class:"mb-10 md:my-10"},is={class:"flex sm:gap-8 gap-5 flex-wrap sm:flex-nowrap"},cs={class:"w-full"},ds={class:"relative"},us={class:"hidden max-h-56 overflow-y-auto scrollbar-rounded absolute top-14 border-2 rounded-md px-3 py-2 bg-white w-full"},ms={class:"my-2"},$s=L({__name:"CompanySalary",emits:["search"],setup(b,{emit:a}){const P=H(),w=ae();U();const v=i(!1),y=i(!1),k=i("Não foi possível carregar as informações da empresa."),D=i(0),r=O({}),m=i(""),h=i(""),p=i(!1),C=u=>Math.floor(u??0),A=u=>(u??0)%1>=.5,j=u=>{const l=A(u);return 5-C(u)-(l?1:0)},I=a;function q(){p.value=m.value!==""||h.value!=="",I("search",{role:m.value,place:h.value})}return T(async()=>{var u,l,t;try{if(v.value=!0,y.value=!1,!navigator.onLine){y.value=!0,k.value="Sem conexão com a internet. Verifique sua rede e tente novamente.";return}const s=P.params.companyId,c=await w.getOne({filter:{id:s},page:1,limit:1});if(!c||!c.data){y.value=!0,k.value="Não foi possível carregar as informações da empresa.";return}Object.assign(r,c.data)}catch(s){console.error(s),y.value=!0,D.value=((u=s==null?void 0:s.response)==null?void 0:u.status)||0,k.value=((t=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:t.message)||"Ocorreu um erro ao carregar os dados da empresa."}finally{v.value=!1}}),(u,l)=>y.value?(o(),B(re,{key:0,message:k.value,"error-code":D.value,"reload-button-text":"Recarregar página"},null,8,["message","error-code"])):v.value?(o(),B(oe,{key:1})):(o(),B(X,{key:2},{default:G(()=>{var t,s,c,g,f,$,d;return[e("div",Ee,[e("div",Le,[e("div",Qe,[e("div",Ve,[e("img",{onClick:l[0]||(l[0]=_=>Z(J).push("/overview/company/"+r.id)),class:"mt-1.5 sm:mt-0 cursor-pointer xxs:max-w-20 xxs:max-h-20 xs:w-24 xs:h-24 w-32 h-32 object-cover rounded",src:r.logo,alt:"Logo da empresa"+r.name},null,8,He),e("div",Oe,[e("h2",Te,x(r.name),1),e("span",ze,[l[2]||(l[2]=e("i",{class:"bx bx-map mr-1"},null,-1)),E(x((t=r.address)==null?void 0:t.city)+", "+x((s=r.address)==null?void 0:s.country),1)]),e("div",Re,[(o(!0),n(F,null,S(C(((c=r.rating)==null?void 0:c.average)??0),_=>(o(),n("i",{key:"filled-"+_,class:"bx bxs-star text-xl sm:text-2xl text-[#003F72]"}))),128)),A(((g=r.rating)==null?void 0:g.average)??0)?(o(),n("i",Ue)):Q("",!0),(o(!0),n(F,null,S(j(((f=r.rating)==null?void 0:f.average)??0),_=>(o(),n("i",{key:"empty-"+_,class:"bx bx-star text-xl sm:text-2xl text-[#003F72]"}))),128)),e("div",Ge,[e("span",Ze,x(($=r.rating)!=null&&$.average?(d=r.rating)==null?void 0:d.average:0)+"/5",1)])]),e("span",Je,x(r.sector),1)])]),e("div",Ke,[e("a",{href:`/company/${r.id}/salary`,class:"max-w-full text-center block lg:inline bg-[#003F72] py-[12px] md:py-[18px] md:px-[45px] rounded text-white border-none"},"Avaliar sálario",8,We)])]),e("div",Xe,[e("div",Ye,[e("ul",es,[e("li",ss,[e("a",{href:"/overview/company/"+r.id,class:"cursor-pointer text-[#003F72] text-md py-4 font-bold"},"Visão Geral",8,ts)]),e("li",as,[e("a",{href:"/reviews/company/"+r.id,class:"cursor-pointer text-[#003F72] text-md py-3 font-bold"},"Avaliações",8,os)]),e("li",rs,[e("a",{href:"/salaries/company/"+r.id,class:"cursor-pointer text-[#003F72] text-md py-3 font-bold"},"Salários",8,ns)])])])]),e("div",ls,[e("div",is,[e("div",cs,[l[5]||(l[5]=e("label",{class:"font-bold text-sm sm:text-base mb-1 block"},"Cargo:",-1)),e("div",ds,[K(e("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=_=>m.value=_),onInput:q,placeholder:"Cargos",class:"p-3 pr-3 border border-[#D4D2D0] bg-white focus:outline-none focus:ring-2 focus:ring-[#003F72] focus:border-transparent rounded-md w-full"},null,544),[[W,m.value]]),l[4]||(l[4]=e("div",{class:"absolute right-3 bottom-3 flex items-center pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])],-1)),e("div",us,[(o(),n(F,null,S(5,_=>e("div",ms,l[3]||(l[3]=[e("div",{class:"flex gap-2 items-center"},[e("h3",{class:"text-md font-bold"},"Administração"),e("span",{class:"text-[#595959] mt-1 text-sm"},"30 salários")],-1),e("div",{class:"pl-3"},[e("div",{class:"flex gap-3"},[e("h3",{class:"text-sm"},"Assistente administrativo"),e("span",{class:"text-[#595959] text-sm"},"30 salários")]),e("div",{class:"flex gap-3"},[e("h3",{class:"text-sm"},"Assistente administrativo"),e("span",{class:"text-[#595959] text-sm"},"30 salários")])],-1)]))),64))])])])])])])]),N(Ie,{searchQuery:{role:m.value,place:h.value},"onUpdate:search":q,currentCompany:r},null,8,["searchQuery","currentCompany"]),N(te,{currentCompany:r||null},null,8,["currentCompany"])]}),_:1}))}});export{$s as default};
