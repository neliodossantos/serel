import{_ as me,M as pe}from"./MainLayout-vbuhhaMz.js";import{d as H,u as z,g as c,y as L,b as m,h as G,o as a,c as n,a as e,t as r,F as O,r as q,f as k,e as b,j as S,l as J,i as U,m as xe,B as fe,k as ve}from"./index-L9FfN0sg.js";import{u as K}from"./reviews-BpF1Jmuz.js";import{u as ge,S as be,_ as Y}from"./index-7wMGsnVK.js";import{f as j}from"./formatDate-IHIQYvFe.js";import{M as ye}from"./ModalComponent-CF4lxKtQ.js";import{_ as he,u as we}from"./_plugin-vue_export-helper-D3a9Murb.js";import{P as ke}from"./PreloaderComponent-CBkDSBTt.js";import{u as _e}from"./companies-DLa6_4Al.js";/* empty css                                                                                   */import{E as Ce}from"./ErrorReconnectComponent-BcWJmWIW.js";import"./useTheme-8FjXQqbL.js";import"./logo-DvPXu7Y6.js";const Re={class:"w-full mt-8 flex md:flex-row flex-col gap-8 border-b-[3px] pb-10 border-[#E4E2E0]"},Fe={class:""},$e={class:"font-bold text-2xl dark:text-white"},Se={class:"flex mt-2"},Ie={key:0,class:"bx bxs-star-half text-[#003F72] text-2xl"},Ee={class:"flex-1"},Ae={class:"pb-5"},Le={class:"text-2xl pr-2 font-bold dark:text-white"},Me={class:"my-1"},Oe={class:"text-[#767676] underline md:text-normal text-sm mr-1 dark:text-gray-300"},Ue={class:"text-[#767676] dark:text-gray-300"},je={class:"text-md text-[#767676] dark:text-gray-300"},Te={class:"mt-3 text-[#767676] md:pr-0 pr-2 dark:text-gray-300"},De={class:"border-t-2 border-[#E4E2E0] py-3"},Ne={class:"dark:text-gray-300"},Ve={class:"md:pr-0 pr-4 dark:text-gray-300"},Be={class:"my-5"},Pe={class:"md:pr-0 pr-4 dark:text-gray-300"},We={class:""},qe={key:0},Ye={key:1,class:""},He={key:0,class:"flex flex-wrap justify-between mb-3"},ze={class:"text-md text-[#767676] dark:text-gray-300"},Ge={key:1,class:"bg-gray-50 p-4 rounded-lg mt-4"},Je={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},Ke={class:"mt-4 flex justify-center sm:justify-start gap-3"},Qe={class:"p-6"},Xe={class:"bg-blue-50 p-4 rounded-lg mb-6 flex items-center gap-3"},Ze={class:"text-sm text-gray-700"},et={class:"mt-4"},tt={class:"flex gap-2"},st=["value"],ot=H({__name:"ItemReviewDetailsComponent",props:{review:{},currentCompany:{}},setup(T){var B;const _=T,I=K(),p=z(),u=c(!1),d=(B=p.getUser())==null?void 0:B.id,x=c(!0),s=L({..._.review}),C=L({reviewId:_.review.id,userId:d,isRecommend:!1}),{copy:M,copied:R}=ge(),F=c(!1),$=c(!1),f=c(!1),l=c(!1),E=we(),i=m(()=>Math.floor(s.score??0)),v=m(()=>(s.score??0)%1>=.5),Q=m(()=>5-i.value-(v.value?1:0)),X=m(()=>j.getDay(s.createdAt)),Z=m(()=>j.getMonth(s.createdAt)),ee=m(()=>j.getYear(s.createdAt)),te=m(()=>C.isRecommend===!0&&s.usefulRate.useful===1?"Foi marcada como útil por apenas você":C.isRecommend===!0&&s.usefulRate.useful>1?"Foi marcada como útil por você e mais "+(s.usefulRate.useful-1)+" "+(s.usefulRate.useful-1>1?"pessoas":"pessoa"):"Foi marcada como útil por "+s.usefulRate.useful+" "+(s.usefulRate.useful>1?"pessoas":"pessoa")),se=m(()=>{var t;const o=((t=s.comment)==null?void 0:t.negativeAspects)||"";return l.value||o.length<=320?o:o.slice(0,320)+"..."}),oe=m(()=>{var t;const o=((t=s.comment)==null?void 0:t.positiveAspects)||"";return f.value||o.length<=320?o:o.slice(0,320)+"..."}),ae=()=>{l.value=!l.value},re=()=>{f.value=!f.value},D=async o=>{var t;try{if(p.isLogged()){u.value=!0;const g=await I.usefulReview({reviewId:s.id,userId:d,isRecommend:o});g.success&&(s.usefulRate.useful=((t=g.data.usefulRate)==null?void 0:t.useful)||s.usefulRate.useful+(o?1:0),x.value=!0)}else F.value=!0}catch(g){console.error(g)}finally{u.value=!1}},ne=async()=>{try{u.value=!0;const o=await I.getfulReview({reviewId:s.id,userId:d});o.data?Object.assign(C,o.data):x.value=!1}catch(o){console.log(o)}finally{u.value=!1}},y=()=>`${window.location.origin}/overview/review/details/${_.review.id}`,A=()=>`Confira esta avaliação da empresa ${_.currentCompany.name}: "${s.reviewTitle}" - ${s.score}/5 estrelas`,N=()=>{$.value=!0},h=()=>{setTimeout(()=>{$.value=!1},1e3)},V=(o="Link copiado com sucesso!")=>{const t=y();M(t),E.success(o,{duration:3e3,position:"top-left"}),h()},le=()=>{const o=encodeURIComponent(y());window.open(`https://www.facebook.com/sharer/sharer.php?u=${o}`,"_blank"),h()},ie=()=>{const o=encodeURIComponent(A()),t=encodeURIComponent(y());window.open(`https://twitter.com/intent/tweet?text=${o}&url=${t}`,"_blank"),h()},ce=()=>{const o=encodeURIComponent(`${A()} ${y()}`);window.open(`https://wa.me/?text=${o}`,"_blank"),h()},ue=()=>{V("Link copiado! Cole no Instagram Stories ou em uma publicação.")},de=()=>{const o=encodeURIComponent(y()),t=encodeURIComponent(A());window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${o}&title=${t}`,"_blank"),h()};return G(async()=>{await ne()}),(o,t)=>{var g,P,W;return a(),n(O,null,[e("div",Re,[e("div",Fe,[e("span",$e,r(s.score)+",0",1),e("div",Se,[(a(!0),n(O,null,q(i.value,w=>(a(),n("i",{key:"filled-"+w,class:"bx bxs-star text-2xl text-[#003F72]"}))),128)),v.value?(a(),n("i",Ie)):k("",!0),(a(!0),n(O,null,q(Q.value,w=>(a(),n("i",{key:"empty-"+w,class:"bx bx-star text-2xl text-[#003F72]"}))),128))])]),e("div",Ee,[e("div",Ae,[e("h2",Le,r(s.reviewTitle),1),e("div",Me,[e("span",Oe,r(s.jobTitle),1),e("span",Ue,r(s.employeeType==="Ex-employee"?" (Ex-Funcionário) ":" (Funcionário actual) "),1),e("span",je," em "+r(X.value)+" de "+r(Z.value)+" de "+r(ee.value),1)]),e("h3",Te,r((g=s.comment)==null?void 0:g.comment),1)]),e("div",De,[t[4]||(t[4]=e("h3",{class:"font-bold text-[#595959] dark:text-white"},"Recomendaria?",-1)),e("span",Ne,r(s.recommend?"Sim":"Não")+".",1)]),e("div",null,[t[5]||(t[5]=e("h3",{class:"font-bold text-[#595959] dark:text-white"},"Aspectos negativos:",-1)),e("span",Ve,[b(r(se.value)+" ",1),((P=s.comment)==null?void 0:P.negativeAspects.length)>320?(a(),n("span",{key:0,onClick:ae,class:"text-[#003f72] underline cursor-pointer dark:text-blue-500"},r(l.value?"mostrar menos":"saiba mais..."),1)):k("",!0)])]),e("div",Be,[t[6]||(t[6]=e("h3",{class:"text-[#595959] font-bold dark:text-white"},"Aspectos positivos:",-1)),e("span",Pe,[b(r(oe.value)+" ",1),((W=s.comment)==null?void 0:W.positiveAspects.length)>320?(a(),n("span",{key:0,onClick:re,class:"text-[#003f72] underline cursor-pointer dark:text-blue-500"},r(f.value?"mostrar menos":"saiba mais..."),1)):k("",!0)])]),e("div",We,[u.value?(a(),n("div",qe,[S(be,{class:"w-6 h-6"})])):(a(),n("div",Ye,[s.usefulRate&&s.usefulRate.useful>0?(a(),n("div",He,[e("h1",ze,r(te.value),1),e("button",{onClick:N,type:"button",class:"flex gap-2 items-center mr-4 hover:text-[#003f72] transition-colors dark:text-gray-300"},t[7]||(t[7]=[e("img",{class:"w-5 h-5",src:Y,alt:"Ícone de compartilhamento"},null,-1),b(" Compartilhar ")]))])):k("",!0),x.value?k("",!0):(a(),n("div",Ge,[e("div",Je,[t[9]||(t[9]=e("span",{class:"text-[#595959] font-medium dark:text-white"},"Esta avaliação foi útil?",-1)),s.usefulRate.useful===0?(a(),n("button",{key:0,type:"button",onClick:N,class:"flex gap-2 items-center sm:ml-auto text-[#003f72] hover:text-[#002a4d] transition-colors self-end sm:self-auto"},t[8]||(t[8]=[e("img",{class:"w-5 h-5",src:Y,alt:"Ícone de compartilhamento"},null,-1),e("span",{class:"dark:text-gray-300"},"Compartilhar",-1)]))):k("",!0)]),e("div",Ke,[e("button",{onClick:t[0]||(t[0]=w=>D(!0)),class:"flex-1 sm:flex-none px-6 py-2.5 rounded-lg bg-[#F3F2F1] text-[#595959] hover:bg-[#003f72] hover:text-white transition-colors font-medium focus:outline-none focus:ring-2 focus:ring-[#003f72] focus:ring-opacity-50"},t[10]||(t[10]=[e("i",{class:"bx bx-like mr-1.5 dark:text-gray-300"},null,-1),b("Sim ")])),e("button",{onClick:t[1]||(t[1]=w=>D(!1)),class:"flex-1 sm:flex-none px-6 py-2.5 rounded-lg bg-[#F3F2F1] text-[#595959] hover:bg-[#003f72] hover:text-white transition-colors font-medium focus:outline-none focus:ring-2 focus:ring-[#003f72] focus:ring-opacity-50"},t[11]||(t[11]=[e("i",{class:"bx bx-dislike mr-1.5 dark:text-gray-300"},null,-1),b("Não ")]))])]))]))])])]),S(ye,{"is-open":$.value,onClose:h,title:"Compartilhar Avaliação",maxWidth:"md"},{default:J(()=>[e("div",Qe,[e("div",Xe,[t[12]||(t[12]=e("div",{class:"flex-shrink-0"},[e("i",{class:"bx bxs-quote-alt-left text-2xl text-[#003F72]"})],-1)),e("p",Ze,r(A()),1)]),t[20]||(t[20]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Compartilhar em redes sociais",-1)),e("div",{class:"grid grid-cols-5 gap-3 mb-6"},[e("button",{onClick:le,class:"flex flex-col items-center gap-2 p-3 rounded-lg bg-white hover:bg-gray-50 border border-gray-200 text-[#1877F2] transition-colors",title:"Compartilhar no Facebook"},t[13]||(t[13]=[e("i",{class:"bx bxl-facebook text-2xl"},null,-1),e("span",{class:"text-xs text-gray-600 hidden sm:block"},"Facebook",-1)])),e("button",{onClick:ie,class:"flex flex-col items-center gap-2 p-3 rounded-lg bg-white hover:bg-gray-50 border border-gray-200 text-[#1DA1F2] transition-colors",title:"Compartilhar no Twitter"},t[14]||(t[14]=[e("i",{class:"bx bxl-twitter text-2xl"},null,-1),e("span",{class:"text-xs text-gray-600 hidden sm:block"},"Twitter",-1)])),e("button",{onClick:ce,class:"flex flex-col items-center gap-2 p-3 rounded-lg bg-white hover:bg-gray-50 border border-gray-200 text-[#25D366] transition-colors",title:"Compartilhar no WhatsApp"},t[15]||(t[15]=[e("i",{class:"bx bxl-whatsapp text-2xl"},null,-1),e("span",{class:"text-xs text-gray-600 hidden sm:block"},"WhatsApp",-1)])),e("button",{onClick:ue,class:"flex flex-col items-center gap-2 p-3 rounded-lg bg-white hover:bg-gray-50 border border-gray-200 text-[#E4405F] transition-colors",title:"Compartilhar no Instagram"},t[16]||(t[16]=[e("i",{class:"bx bxl-instagram text-2xl"},null,-1),e("span",{class:"text-xs text-gray-600 hidden sm:block"},"Instagram",-1)])),e("button",{onClick:de,class:"flex flex-col items-center gap-2 p-3 rounded-lg bg-white hover:bg-gray-50 border border-gray-200 text-[#0A66C2] transition-colors",title:"Compartilhar no LinkedIn"},t[17]||(t[17]=[e("i",{class:"bx bxl-linkedin text-2xl"},null,-1),e("span",{class:"text-xs text-gray-600 hidden sm:block"},"LinkedIn",-1)]))]),e("div",et,[t[19]||(t[19]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Ou copie o link",-1)),e("div",tt,[e("input",{type:"text",readonly:"",value:y(),class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"},null,8,st),e("button",{type:"button",onClick:t[2]||(t[2]=()=>V()),class:"flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-[#003F72] hover:bg-[#002a4d] text-white transition-colors"},t[18]||(t[18]=[e("i",{class:"bx bx-copy text-xl"},null,-1),e("span",{class:"font-medium"},"Copiar",-1)]))])])])]),_:1},8,["is-open"]),S(me,{"modal-value":F.value,onClose:t[3]||(t[3]=w=>{F.value=!1})},null,8,["modal-value"]),S(he)],64)}}}),at={class:"w-full mb-24 px-[12%] md:px-0"},rt={class:"mx-auto relative max-w-[400px] sm:max-w-[600px] md:max-w-[900px]"},nt={key:1,href:"/",class:"cursor-pointer flex items-center"},lt=["href"],it=["src","alt"],ct={class:"flex justify-center md:mt-10 min-h-auto"},_t=H({__name:"OverviewDetailsReview",setup(T){const I=xe().params.reviewId,p=L({}),u=c(!1),d=c(!1),x=c("Não foi possível carregar os detalhes da avaliação."),s=c(0),C=K(),M=_e(),R=L({}),F=z(),$=()=>{window.history.length>1&&ve.back()};return G(async()=>{var f,l,E;try{if(u.value=!0,d.value=!1,!navigator.onLine){d.value=!0,x.value="Sem conexão com a internet. Verifique sua rede e tente novamente.";return}const i=await C.getOne({filter:{id:I},page:1,limit:1});if(!i||!i.data){d.value=!0,x.value="Não foi possível carregar os detalhes da avaliação.";return}if(Object.assign(R,i.data),R.companyId)try{const v=await M.getOne({filter:{id:R.companyId},page:1,limit:1});v&&v.data&&Object.assign(p,v.data)}catch(v){console.error("Erro ao buscar dados da empresa:",v)}}catch(i){console.error("Erro ao buscar dados:",i),d.value=!0,s.value=((f=i==null?void 0:i.response)==null?void 0:f.status)||0,x.value=((E=(l=i==null?void 0:i.response)==null?void 0:l.data)==null?void 0:E.message)||"Ocorreu um erro ao carregar os detalhes da avaliação."}finally{u.value=!1}}),(f,l)=>d.value?(a(),U(Ce,{key:0,message:x.value,"error-code":s.value,"reload-button-text":"Recarregar página"},null,8,["message","error-code"])):u.value?(a(),U(ke,{key:1})):(a(),U(pe,{key:2},{default:J(()=>[l[2]||(l[2]=e("div",{class:"w-full bg-[#F8FAFB] min-h-[210px] mb-24 flex justify-center border-b border-[#D4D2D0] px-[12%]"},null,-1)),e("div",at,[e("div",rt,[fe(F).isLogged()?(a(),n("a",{key:0,onClick:$,class:"cursor-pointer flex items-center"},l[0]||(l[0]=[e("i",{class:"bx bx-chevron-left text-3xl md:text-2xl"},null,-1),b(" Voltar a página anterior ")]))):(a(),n("a",nt,l[1]||(l[1]=[e("i",{class:"bx bx-chevron-left text-3xl md:text-2xl"},null,-1),b(" Voltar a página inicial ")]))),e("a",{class:"left-30 w-full h-[150px] block -top-[11rem] md:-top-44 absolute cursor-pointer",href:`/overview/company/${p.id}`},[e("img",{class:"max-w-[150px] min-h-full mx-auto object-cover rounded block",src:p.logo,alt:`Logo da empresa ${p.name}`},null,8,it)],8,lt),e("div",ct,[S(ot,{review:R,currentCompany:p},null,8,["review","currentCompany"])])])])]),_:1}))}});export{_t as default};
